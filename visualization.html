<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>svZeroDSolver: Visualization Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">svZeroDSolver
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Visualization Guide</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md16">About</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md17">Architecture</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md18">Installing Dependencies</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md19">How to Use</a>
  </li>
  <li class="level1">
    <a href="#autotoc_md20">How to Visualize a New Block</a>
  </li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md16"></a>
About</h1>
<p>svZeroDVisualization is a web application designed for visualizing 0D simulation results and the 0D network. It allows users to interactively explore and analyze their simulation data through an intuitive interface. This application is available in the <code>applications</code> folder.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Architecture</h1>
<p>svZeroDVisualization is built using a robust architecture that includes:</p><ul>
<li>Frontend: Utilizes HTML, CSS, Dash, and Plotly for creating a dynamic and interactive user interface. This setup allows for effective visualization and interaction with the 0D network and simulation results.</li>
<li>Backend: Powered by a Flask application that handles the server-side logic. It leverages NetworkX for managing and visualizing the network graph and a Python code to determine network connections.</li>
</ul>
<h1><a class="anchor" id="autotoc_md18"></a>
Installing Dependencies</h1>
<ol type="1">
<li>We recommend using a virtual environment to help manage project-specific dependencies and avoid conflicts with other projects.<ul>
<li>Using venv: <div class="fragment"><div class="line">python -m venv venv</div>
<div class="line">source venv/bin/activate  # On Windows use `venv\Scripts\activate`</div>
</div><!-- fragment --></li>
<li>Using Conda: <div class="fragment"><div class="line">conda create --name myenv python=3.12  # Replace with your desired Python version</div>
<div class="line">conda activate myenv</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Install the necessary packages: <div class="fragment"><div class="line">pysvzerod</div>
<div class="line">pandas</div>
<div class="line">matplotlib</div>
<div class="line">networkx</div>
<div class="line">dash</div>
<div class="line">plotly</div>
<div class="line">numpy</div>
<div class="line">argparse</div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="autotoc_md19"></a>
How to Use</h1>
<p>Note: Files related to this application are in the <code>applications</code>folder, within the <code>dirgraph_visualization</code> subdirectory.</p>
<ol type="1">
<li>Command line execution: Pass the file path to your input JSON file and the output directory where you want the visualization to be saved as command line arguments.<ul>
<li>Pass a third argument <code>export_csv</code> optionally if you want to save svZeroDSolver raw output.</li>
<li>The program will execute svZeroDSolver, generate a directed graph visualization of your network, parse simulation results, and display the results along with the corresponding nodes on a local Flask server. <div class="fragment"><div class="line">python applications/svZeroDVisualization/visualize_simulation.py &#39;tests/cases/chamber_elastance_inductor.json&#39; &#39;./output/circuit_img/dir_graph&#39;</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Once the server is open, you can click on a node to inspect further.<ul>
<li>The data for that node will be displayed, including the simulation parameters input for that node, pressure/flow data, and any internal variables if present.</li>
<li>Additional features include the ability to download figures and use the trace function for more detailed inspection of network elements. The trace feature allows users to filter the view by specific element types, such as isolating and examining only the blood vessels or identifying the locations of the chambers within the network. This functionality enhances the ability to focus on and analyze particular components of the network with precision.</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md20"></a>
How to Visualize a New Block</h1>
<ol type="1">
<li><b>Update JSON Parsing</b>:<ul>
<li>When parsing the JSON file, ensure that the new block type is included.</li>
<li>Update the <code>load_json_input_file</code> function to create a new pandas DataFrame for the new block type.</li>
</ul>
</li>
<li><b>Create a New Function for the Block Type</b>:<ul>
<li>Develop a function that processes the new block type. This function should take in:<ul>
<li><code>d</code> (the dictionary of parameters loaded from the JSON file)</li>
<li>Any relevant DataFrames (e.g., <code>df_vessels</code>, <code>junctions_expanded</code>)</li>
</ul>
</li>
<li>Within this function:<ul>
<li>Initialize a dictionary to hold all blocks of the new type.</li>
<li>Iterate through potential connectors for the new block type.</li>
<li>For each connector, update the <code>connecting_block_list</code> and determine the <code>flow_directions</code> (use +1 for downstream and -1 for upstream).</li>
</ul>
</li>
</ul>
</li>
<li><b>Update the Parameter Dictionary</b>:<ul>
<li>Add the newly created blocks to the <code>d["blocks"]</code> dictionary.</li>
</ul>
</li>
<li><b>Update Existing Functions</b>:<ul>
<li>Ensure that the new block type is integrated into the existing block structure, allowing it to interact with other components in the visualization.</li>
<li>For instance, if the new block type can be connected to vessels, make sure to update functions like <code>create_vessel_blocks</code> to handle connections involving the new block type. This includes updating any relevant functions that create or manage connections between blocks.</li>
</ul>
</li>
</ol>
<p>By following these steps, you will ensure that the new block type is properly parsed, processed, and integrated into the visualization system. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
